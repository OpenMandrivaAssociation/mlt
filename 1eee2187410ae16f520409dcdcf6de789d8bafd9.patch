From 1eee2187410ae16f520409dcdcf6de789d8bafd9 Mon Sep 17 00:00:00 2001
From: Dan Dennedy <dan@dennedy.org>
Date: Thu, 16 Mar 2023 11:25:26 -0700
Subject: [PATCH] fix #887 FFmpeg 6 compile error

---
 src/modules/avformat/factory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/modules/avformat/factory.c b/src/modules/avformat/factory.c
index 3fc747bb1..9608d32d0 100644
--- a/src/modules/avformat/factory.c
+++ b/src/modules/avformat/factory.c
@@ -461,8 +461,8 @@ MLT_REPOSITORY
 		if (avfilter_pad_count(f->inputs) == 1 &&
 		    avfilter_pad_count(f->outputs) == 1 &&
 #else
-		if (avfilter_filter_pad_count(f, f->inputs) == 1 &&
-		    avfilter_filter_pad_count(f, f->outputs) == 1 &&
+		if (avfilter_filter_pad_count(f, 0) == 1 &&
+			avfilter_filter_pad_count(f, 1) == 1 &&
 #endif
 		    avfilter_pad_get_type(f->inputs, 0) == avfilter_pad_get_type(f->outputs, 0) &&
 		    !mlt_properties_get(blacklist, f->name))
